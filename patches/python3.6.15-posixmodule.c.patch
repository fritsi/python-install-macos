--- Modules/posixmodule.c	2021-09-04 05:49:41.000000000 +0200
+++ Modules/posixmodule.c.patched	2022-09-12 13:57:23.606713156 +0200
@@ -118,6 +118,7 @@
 
 #if defined(__FreeBSD__) || defined(__DragonFly__) || defined(__APPLE__)
 #ifdef HAVE_SYS_SOCKET_H
+#undef _POSIX_C_SOURCE
 #include <sys/socket.h>
 #endif
 #endif
